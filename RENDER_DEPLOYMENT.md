# AI Interviewer - Render Deployment Guide

This guide will help you deploy your AI Interviewer application to Render so it's accessible from anywhere.

## Prerequisites

1. **Render Account**: Sign up at [render.com](https://render.com)
2. **GitHub Repository**: Your code should be in a GitHub repository
3. **API Keys**: You'll need:
   - OpenAI API Key
   - Pinecone API Key

## Deployment Steps

### Step 1: Deploy the Backend

1. **Go to Render Dashboard**
   - Log in to [render.com](https://render.com)
   - Click "New +" → "Web Service"

2. **Connect Your Repository**
   - Connect your GitHub repository
   - Select the repository containing your AI Interviewer code

3. **Configure Backend Service**
   - **Name**: `ai-interviewer-backend`
   - **Root Directory**: `backend`
   - **Environment**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `uvicorn main:app --host 0.0.0.0 --port $PORT`

4. **Set Environment Variables**
   Go to the "Environment" tab and add these variables:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   PINECONE_API_KEY=your_pinecone_api_key_here
   PINECONE_ENVIRONMENT=us-west1-gcp
   PINECONE_INDEX_NAME=ai-interviewer
   SECRET_KEY=your-secret-key-here
   ALGORITHM=HS256
   ACCESS_TOKEN_EXPIRE_MINUTES=30
   ALLOWED_ORIGINS=https://ai-interviewer-frontend.onrender.com
   DEBUG=false
   UPLOAD_DIR=uploads
   MAX_FILE_SIZE=10485760
   MAX_INTERVIEW_DURATION=60
   DEFAULT_QUESTION_COUNT=10
   ```

5. **Add Database**
   - Go to "Databases" → "New Database"
   - Choose "PostgreSQL"
   - Name: `ai-interviewer-db`
   - Plan: Starter (Free tier available)
   - Connect this database to your backend service

6. **Deploy**
   - Click "Create Web Service"
   - Wait for deployment to complete
   - Note your backend URL (e.g., `https://ai-interviewer-backend.onrender.com`)

### Step 2: Deploy the Frontend

1. **Create New Web Service**
   - Click "New +" → "Web Service"
   - Connect the same GitHub repository

2. **Configure Frontend Service**
   - **Name**: `ai-interviewer-frontend`
   - **Root Directory**: `frontend`
   - **Environment**: `Static Site`
   - **Build Command**: `npm install && npm run build`
   - **Publish Directory**: `out`

3. **Set Environment Variables**
   ```
   NEXT_PUBLIC_API_URL=https://ai-interviewer-backend.onrender.com
   ```

4. **Deploy**
   - Click "Create Web Service"
   - Wait for deployment to complete
   - Note your frontend URL (e.g., `https://ai-interviewer-frontend.onrender.com`)

### Step 3: Update Backend CORS Settings

1. **Update Backend Environment Variables**
   - Go to your backend service on Render
   - Navigate to "Environment" tab
   - Update `ALLOWED_ORIGINS` with your actual frontend URL:
   ```
   ALLOWED_ORIGINS=https://ai-interviewer-frontend.onrender.com
   ```

2. **Redeploy Backend**
   - Click "Manual Deploy" → "Deploy latest commit"

### Step 4: Test Your Deployment

1. **Access Your Application**
   - Frontend URL: `https://ai-interviewer-frontend.onrender.com`
   - Backend API: `https://ai-interviewer-backend.onrender.com`

2. **Test Key Features**
   - User registration/login
   - Candidate management
   - Interview creation
   - AI-powered interviews

## Important Notes

### Free Tier Limitations
- **Render Free Tier**: Services may sleep after 15 minutes of inactivity
- **Database**: Free PostgreSQL database with 1GB storage
- **Build Time**: Limited build minutes per month

### Production Considerations
- **Upgrade Plans**: Consider upgrading for better performance
- **Custom Domains**: You can add custom domains in Render
- **SSL**: HTTPS is automatically enabled
- **Monitoring**: Use Render's built-in monitoring tools

### Environment Variables Reference

#### Backend Required Variables:
```
OPENAI_API_KEY=sk-... (Your OpenAI API key)
PINECONE_API_KEY=... (Your Pinecone API key)
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=ai-interviewer
SECRET_KEY=... (Auto-generated by Render)
DATABASE_URL=... (Auto-set by Render database)
```

#### Frontend Required Variables:
```
NEXT_PUBLIC_API_URL=https://ai-interviewer-backend.onrender.com
```

## Troubleshooting

### Common Issues:

1. **CORS Errors**
   - Ensure `ALLOWED_ORIGINS` includes your frontend URL
   - Check that URLs use HTTPS in production

2. **Database Connection Issues**
   - Verify database is connected to backend service
   - Check `DATABASE_URL` environment variable

3. **Build Failures**
   - Check build logs in Render dashboard
   - Ensure all dependencies are in requirements.txt

4. **WebSocket Issues**
   - Verify WebSocket URL uses `wss://` for HTTPS
   - Check CORS settings for WebSocket connections

### Getting Help:
- Check Render logs in the dashboard
- Review application logs for specific errors
- Ensure all environment variables are set correctly

## URLs for Your Manager

Once deployed, provide these URLs to your manager:

- **Application**: `https://ai-interviewer-frontend.onrender.com`
- **API Documentation**: `https://ai-interviewer-backend.onrender.com/docs`
- **Health Check**: `https://ai-interviewer-backend.onrender.com/health`

The application will be accessible from anywhere with these URLs!
